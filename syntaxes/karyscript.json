{
    "fileTypes": [
        "k"
    ],
    "name": "KaryScript",
    "patterns": [{
        "include": "#expression"
    }],
    "repository": {
        "comment": {
			"match": "//.*$\\n?",
            "name": "comment.line.double-slash.karyscript"
        },
        "number": {
            "match": "\\b(0x[0-9a-f]+|[0-9]+(?:\\.[0-9]+)?)\\b",
            "name": "constant.numeric.karyscript"
        },
        "keywords": {
            "match": "\\b(?:also(?:\\s)+(?:if|unless)|return|throw|yield|delete|new|of|in|up|down|when|to|via|clone|import|void|await|async|catch|finally|case|default|continue|debugger|else)\\b",
            "name": "keyword.control.karyscript"
        },
        "controls-structures": {
            "begin": "\\b(if|unless|for|while|try)\\b",
			"beginCaptures": {
				"1": {
                    "name": "keyword.control.karyscript"
                }
			},
            "patterns": [ {
               "include": "#expression"
            }],
            "end": "\\b(end)\\b",
            "endCaptures": {
                "1": {
					"name": "keyword.control.karyscript"
				}
            }
        },
        "function-declaration": {
            "name": "meta.function.karyscript",
            "begin": "\\b(?:(out)(?:\\s)+)?(def|async)(?:\\s)+([a-zA-Z_\\-$][\\w$]*)((?:(?:\\s)+[a-zA-Z_\\-$][\\w$]*)*)(?:\\s)*\\:",
			"beginCaptures": {
				"1": {
                    "name": "storage.type.karyscript"
                },
                "2": {
					"name": "storage.modifier.karyscript"
				},
                "3": {
                    "name": "entity.name.function.karyscript"
                },
                "4": {
                    "name": "variable.parameter.karyscript"
                }
			},
            "patterns": [ {
               "include": "#expression"
            }],
            "end": "\\b(end)\\b",
            "endCaptures": {
                "1": {
					"name": "storage.modifier.karyscript"
				}
            }
        },
        "class-declaration": {
            "name": "meta.class.karyscript",
            "begin": "\\b(?:(out)(?:\\s)+)?((?:class)?)(?:\\s)+([0-9a-zA-Z\\$\\-_][\\w\\$\\-_]*)(?:(?:\\s)+(extends)(?:\\s)+([0-9a-zA-Z\\$\\-_][\\w\\$\\-_]*)(?:\\s)*|(?:\\s)*)?\\:",
			"beginCaptures": {
				"1": {
                    "name": "storage.type.karyscript"
                },
                "2": {
					"name": "storage.type.class.karyscript"
				},
                "3": {
                    "name": "entity.name.type.class.karyscript"
                },
                "4": {
                    "name": "storage.type.class.karyscript"
                },
                "5": {
                    "name": "entity.name.type.class.karyscript"
                }
			},
            "patterns": [{
               "include": "#expression"
            }],
            "end": "\\b(end)\\b",
            "endCaptures": {
                "1": {
					"name": "storage.type.class.karyscript"
				}
            }
        },
        "literal": {
            "name": "literal.karyscript",
            "patterns": [
                {
                    "include": "#number"
                }
            ]
        },
        "expression": {
            "name": "expression.karyscript",
            "patterns": [
                {
                    "include": "#controls-structures"
                },
                {
                    "include": "#class-declaration"
                },
                {
                    "include": "#function-declaration"
                },
                {
                    "include": "#comment"
                },
                {
                    "include": "#keywords"
                },
                {
                    "include": "#literal"
                }
            ]
        }
    },
    "scopeName": "source.karyscript"
}
